<!DOCTYPE html>
<html dir="rtl" lang="fa">
<head>
  <meta charset="UTF-8">
  <title>تماس با ما | پلاستیک سالمی</title>
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- فایل‌های CSS -->
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/font-awesome.min.css">
  <link rel="stylesheet" href="css/style.css">

  <style>
    /* فاصله بالای صفحه برای جلوگیری از پوشش ناوبار ثابت */
    body {
      font-family: "Vazir", sans-serif;
      margin-top: 80px;
    }
    /* (اگر تغییراتی در استایل ناوبار مورد نیاز است، در فایل style.css یا در اینجا اعمال شود) */
    nav.navbar-sticky {
      position: fixed !important;
      top: 0;
      left: 0;
      right: 0;
      z-index: 9999;
      background-color: #333 !important;
      margin-bottom: 0 !important;
    }
    /* استایل‌های بخش تماس */
    .contact-page {
      padding: 60px 0;
    }
    .contact-info-box {
      background-color: #f9f9f9;
      border-radius: 4px;
      padding: 20px;
      margin-bottom: 20px;
    }
    .contact-info-box h3 {
      margin-bottom: 15px;
      font-size: 18px;
      font-weight: 600;
    }
    .contact-info-box p {
      margin-bottom: 10px;
      line-height: 28px;
    }
    .map-container {
      width: 100%;
      height: 300px;
      border: 0;
      border-radius: 4px;
      margin-top: 10px;
    }
    .contact-form .form-control {
      margin-bottom: 15px;
    }
    .contact-form button {
      margin-top: 10px;
    }
    /* جلوگیری از گلیچ یا تغییر رنگ در فوتر */
    .footer,
    .footer a,
    .footer .nav > li > a {
      transition: none !important;
    }
    .footer-social li a {
      background: transparent !important;
      color: #fff !important;
      border: none !important;
      transition: none !important;
    }
    .footer-social li a:hover,
    .footer-social li a:focus {
      background: transparent !important;
      color: #e60000 !important;
      text-decoration: none !important;
    }
  </style>
</head>
<body data-spy="scroll" data-offset="62">
  
  <!-- container برای بارگذاری ناوبار (از فایل navbar.html) -->
  <div id="navbar-container"></div>
  
  <!-- محتوای صفحه تماس -->
  <div class="container contact-page">
    <div class="row text-center">
      <div class="col-sm-8 col-sm-offset-2">
        <div class="section-title">
          <h2 class="section-title-divider primary-divider">تماس با ما</h2>
          <p>برای دریافت اطلاعات بیشتر یا ثبت سفارش با ما در ارتباط باشید</p>
        </div>
      </div>
    </div>
    
    <div class="row">
      <!-- ستون راست: اطلاعات تماس و نقشه -->
      <div class="col-md-5">
        <div class="contact-info-box">
          <h3>دفتر مرکزی:</h3>
          <p>آدرس: تهران - شهرک صنعتی پرند - بعد از میدان فناوری - جیابان گلزار - خیابان گل آذین - پلاک 23</p>
          <p>تلفن: ۰۲۱-xxxxxxx<br>موبایل: +98 912 345 6789</p>
          <p>ایمیل: info@salemiplastic.com</p>
          <!-- نقشه گوگل (iFrame) -->
          <iframe 
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3234.7404901912567!2d51.03279061568694!3d35.51140484537498!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3f8e02957c67af5d%3A0xa74c7b148d1c3425!2sParand%20Industrial%20Town!5e0!3m2!1sen!2sir!4v1690386116001" 
            width="100%" height="300" 
            style="border:0;" 
            allowfullscreen="" loading="lazy" 
            referrerpolicy="no-referrer-when-downgrade"
            class="map-container">
          </iframe>
        </div>
      </div>
      
      <!-- ستون چپ: فرم تماس -->
      <div class="col-md-7">
        <div class="contact-form">
          <form id="contact-form" class="contact-form">
            <div class="row">
              <div class="col-md-6">
                <input id="name" class="form-control" name="name" autocomplete="off" placeholder="نام" type="text" required>
              </div>
              <div class="col-md-6">
                <input id="email" class="form-control" name="email" autocomplete="off" placeholder="ایمیل" type="email" required>
              </div>
              <div class="col-md-12">
                <input id="subject" class="form-control" name="subject" autocomplete="off" placeholder="موضوع" type="text" required>
              </div>
              <div class="col-md-12">
                <textarea id="message" class="form-control" rows="5" name="message" placeholder="پیام" required></textarea>
              </div>
              <div class="col-md-12">
                <button type="submit" class="btn btn-default btn-normal">ارسال پیام</button>
              </div>
            </div>
          </form>
          <p id="form-status"></p>
        </div>
      </div>
    </div>
  </div>

  <!-- فوتر (با اصلاحات جلوگیری از گلیچ) -->
<!-- فوتر با پس‌زمینه تیره و طراحی مینیمال -->
<footer class="footer-minimal-dark">
  <div class="container text-center">
    <!-- آیکون‌های شبکه‌های اجتماعی -->
    <ul class="social-icons">
      <li><a href="#"><i class="fa fa-instagram"></i></a></li>
      <li><a href="#"><i class="fa fa-whatsapp"></i></a></li>
      <li><a href="#"><i class="fa fa-telegram"></i></a></li>
    </ul>
    
    <!-- متن کپی‌رایت -->
    <p>
      تمامی حقوق محفوظ است © 
      <span id="current-year">۲۰۲۵</span> 
      پلاستیک سالمی
    </p>
  </div>
</footer>

<style>
/* استایل فوتر مینیمال با پس‌زمینه تیره */
.footer-minimal-dark {
  background-color: #333;  /* پس‌زمینه تیره */
  color: #fff;            /* متن سفید */
  padding: 20px 0;        /* فاصله عمودی بالا و پایین فوتر */
  font-size: 14px;
}

.footer-minimal-dark .social-icons {
  list-style: none;
  margin: 0 0 10px;
  padding: 0;
}

.footer-minimal-dark .social-icons li {
  display: inline-block;
  margin: 0 6px;
}

/* رنگ پیش‌فرض آیکون‌ها سفید؛ و هاور با رنگ قرمز */
.footer-minimal-dark .social-icons li a {
  color: #fff;
  font-size: 18px;
  transition: color 0.3s ease, transform 0.3s ease;
}

.footer-minimal-dark .social-icons li a:hover {
  color: #e60000;    /* تغییر رنگ هنگام هاور */
  transform: scale(1.2) translateY(-2px);
}

/* حذف فاصله اضافی از متن کپی‌رایت */
.footer-minimal-dark p {
  margin: 0;
}
</style>

<script>
  // نمایش سال جاری در بخش کپی‌رایت
  document.getElementById('current-year').textContent = new Date().getFullYear();
</script>

    <!-- End Footer -->

  <!-- فایل‌های JS -->
  <!-- بارگذاری Supabase -->
  <script src="https://unpkg.com/@supabase/supabase-js/dist/umd/supabase.js"></script>
  <script src="utils/supabaseClient.js"></script>
  <script src="js/jquery.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  
  <script>
    // ارسال پیام تماس به جدول contact_messages در Supabase
    document.getElementById('contact-form').addEventListener('submit', async function(e) {
      e.preventDefault();

      const fullname = document.getElementById('name').value;
      const email = document.getElementById('email').value;
      const subject = document.getElementById('subject').value;
      const message = document.getElementById('message').value;
      const statusEl = document.getElementById('form-status');

      const { data, error } = await supabase
        .from('contact_messages')
        .insert([{ fullname, email, subject, message }]);

      if (error) {
        console.error('خطا در ثبت پیام:', error);
        statusEl.textContent = 'خطا در ارسال پیام. لطفاً دوباره تلاش کنید.';
        statusEl.style.color = 'red';
      } else {
        statusEl.textContent = 'پیام شما با موفقیت ارسال شد!';
        statusEl.style.color = 'green';
        document.getElementById('contact-form').reset();
      }
    });
  </script>
  
  <!-- اسکریپت بارگذاری ناوبار از فایل navbar.html -->
  <script>
    function initNavbar() {
      const navbarLinks = document.querySelectorAll('#main-navbar a');
      navbarLinks.forEach(function(link) {
        link.addEventListener("click", function(e) {
          const href = link.getAttribute('href');
          if (href && href.startsWith("#")) {
            const target = document.querySelector(href);
            if (!target) {
              e.preventDefault();
              window.location.href = "index.html" + href;
            } else {
              e.preventDefault();
              window.scrollTo({
                top: target.offsetTop - 70,
                behavior: "smooth"
              });
            }
          }
        });
      });
    }
  
    // بارگذاری ناوبار از فایل navbar.html و سپس اجرای initNavbar
    fetch('navbar.html')
      .then(function(response) {
        if (!response.ok) {
          throw new Error('خطا در بارگذاری فایل ناوبار');
        }
        return response.text();
      })
      .then(function(data) {
        document.getElementById('navbar-container').innerHTML = data;
        initNavbar();
      })
      .catch(function(err) {
        console.error('Error loading navbar:', err);
      });
  </script>
</body>
</html>
